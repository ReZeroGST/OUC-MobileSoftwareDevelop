## 一、实验准备

课程主页：[课程主页(gitee.com)](https://gitee.com/gaopursuit/mobile_software)

实验文档：[lab3文档](https://developers.weixin.qq.com/community/develop/article/doc/0008aa90bc4e68c6a39f8b7e956813)

实验代码：[lab3代码](https://gitee.com/xxwan/garbage-sorting-applet)



## **二、实验目标**

学习微信小程序云开发的基础知识。能够完成利用文本搜索的功能就好，图像识别、语音识别接口有时有问题，不强求。



## 三、实验步骤

#### 1、创建微信小程序

过程见前两个lab，在此不再赘述。



#### 2、创建图像识别应用

##### (1) 注册百度智能云并实名认证

##### (2) 创建一个图像识别应用

![创建图像识别应用1](E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\创建图像识别应用1.png)

![创建图像识别应用2](E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\创建图像识别应用2.png)

##### (3) 记录应用API KEY 和 SECRET KEY

![创建图像识别应用3](E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\创建图像识别应用3.png)



#### 3、创建云开发环境

##### (1) 打开微信开发者工具，选择要创建云环境的小程序，点击微信开发者工具中的云开发按钮

![创建云开发环境1](E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\创建云开发环境1.png)

##### (2) 打开云开发之后，会弹出创建云环境窗口，创建云环境之后进入云开发控制台

##### (3) 创建成功, 进入到下图的界面你的云环境就创建成功了

![创建云开发环境2](E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\创建云开发环境2.png)



#### 4. 导入小程序项目

进入微信开发者工具，导入垃圾分类小程序项目, 注意这里导入的是包含cloudfunction，miniprogram，project.config.json的整个文件夹。



#### 5. 添加项目参数

##### (1) 添加百度API KEY，API SECRET

![](E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\修改api.png)

##### (2) 添加微信小程序appid

![](E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\修改appid.png)

##### (3) 添加云环境ID

![](E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\修改云空间ID.png)



#### 6. 部署云函数

##### (1) 点击`cloudfuntions`文件夹展开子文件夹

##### (2) 依次右键点击展开的子文件夹并点击弹出的`上传并部署：云端安装依赖(不上传node_modules)`

![](E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\部署云函数.png)

#### 5. 部署云数据库

##### (1) 点击小程序开发工具的`云开发`

##### (2) 点击`数据库`

##### (3) 创建集合`trash`, `type`

#####  (4) 依次导入`垃圾分类数据集`文件夹下的`trash.json`，`type.json`文件

![](E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\部署数据库1.png)

![](E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\部署数据库2.png)



## 四、程序运行结果

##### (1)首页

<img src="E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\运行结果首页.png" alt="首页" style="zoom:50%;" />

##### (2)搜索

<img src="E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\运行结果搜索.png" style="zoom:50%;" />

+ **文字搜索**

  <img src="E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\运行结果搜索文字.png" style="zoom:50%;" />

  

+ **图像搜索**

  <img src="E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\运行结果搜索图像1.png" style="zoom:50%;" />
  
  <img src="E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\运行结果搜索图像2.png" style="zoom:50%;" />
  
  <img src="E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\运行结果搜索图像3.png" style="zoom:50%;" />

##### (3)我的

<img src="E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\运行结果我的.png" style="zoom:50%;" />

  

  

## 五、问题总结与体会

#####  问题：使用图像搜索识别时，无法正确识别物品。

1. **问题描述**：

   图像搜索识别时一直报错“很遗憾没有识别到物品哦！！”。

2. **解决方法**：

   在“概览”的“服务列表”下开通“通用物体和场景识别高级版API”。
   

![](E:\ZERO\OneDrive\Desktop\移动应用开发实验\实验3\解决问题.png)



#### 3. 收获与体会：

（1）通过本次实验，我对微信小程序的云开发有了更深入的理解。云开发提供了一站式的后台解决方案，使得开发过程更加简便，无需搭建服务器即可实现复杂的功能。

（2）在测试图像识别功能时，遇到了无法识别的问题。这让我意识到，虽然云服务提供了强大的功能，但在实际应用中仍需不断调试和优化，才能达到预期效果。